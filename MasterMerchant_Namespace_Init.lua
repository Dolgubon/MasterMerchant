-- MasterMerchant Namespace Setup
-- Written July 2014 by Dan Stone (@khaibit) - dankitymao@gmail.com
-- Extended Feb 2015 - May 2020 by (@Philgo68) - Philgo68@gmail.com
-- Released under terms in license accompanying this file.
-- Distribution without license is prohibited!

-- |H1:item:126485:5:0:0:0:0:0:0:0:0:0:0:0:0:0:0:1:0:0:0:0|h|h  -- no craft cost
-- |H1:item:126485:5:1:0:0:0:0:0:0:0:0:0:0:0:0:0:1:0:0:0:0|h|h  -- craft cost
-- |H0:item:126485:5:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0|h|h  -- database item
-- |H0:item:57159:3:40:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0|h|h

MMScrollList = ZO_SortFilterList:Subclass()
MMScrollList.defaults = { }
-- Sort keys for the scroll lists
MMScrollList.SORT_KEYS = {
    ['price'] = { isNumeric = true },
    ['time'] = { isNumeric = true },
    ['rank'] = { isNumeric = true },
    ['sales'] = { isNumeric = true },
    ['tax'] = { isNumeric = true },
    ['count'] = { isNumeric = true },
    ['name'] = { isNumeric = false },
    ['itemGuildName'] = { isNumeric = false },
    ['guildName'] = { isNumeric = false }
}

MasterMerchant = { }
MasterMerchant.name = 'MasterMerchant'
MasterMerchant.version = '3.0.3'
MasterMerchant.locale = 'en'
MasterMerchant.viewMode = 'self'
MasterMerchant.isScanning = false
MasterMerchant.isScanningParallel = { }
MasterMerchant.salesData = { }
MasterMerchant.eventsCache = { }
MasterMerchant.eventsSinceCache = { }
MasterMerchant.lastHistoryRequest = { }
MasterMerchant.verboseLevel = 4
MasterMerchant.lastHeadEvent = { }
MasterMerchant.lastTailEvent = { }
MasterMerchant.lastInputVar = { } -- debug var
MasterMerchant.isScanningHistory = { } -- added for debug on 8-21
MasterMerchant.isInitialized = false -- added 8-25

if LibDebugLogger then
  local logger = LibDebugLogger.Create(MasterMerchant.name)
  MasterMerchant.logger = logger
end
local SDLV = DebugLogViewer
if SDLV then MasterMerchant.viewer = true else MasterMerchant.viewer = false end

local function create_log(log_type, log_content)
  if log_type == "Debug" then
    MasterMerchant.logger:Debug(log_content)
  end
  if log_type == "Verbose" then
    MasterMerchant.logger:Verbose(log_content)
  end
end

local function emit_message(log_type, text)
  if(text == "") then
      text = "[Empty String]"
  end
  create_log(log_type, text)
end

local function emit_table(log_type, t, indent, table_history)
  indent          = indent or "."
  table_history    = table_history or {}

  for k, v in pairs(t) do
    local vType = type(v)

    emit_message(log_type, indent.."("..vType.."): "..tostring(k).." = "..tostring(v))

    if(vType == "table") then
      if(table_history[v]) then
        emit_message(log_type, indent.."Avoiding cycle on table...")
      else
        table_history[v] = true
        emit_table(log_type, v, indent.."  ", table_history)
      end
    end
  end
end

function MasterMerchant.dm(log_type, ...)
  if not MasterMerchant.logger then return end
  for i = 1, select("#", ...) do
    local value = select(i, ...)
    if(type(value) == "table") then
      emit_table(log_type, value)
    else
      emit_message(log_type, tostring(value))
    end
  end
end

-- We do 'lazy' updates on the scroll lists, this is used to
-- mark whether we need to RefreshData() before showing
MasterMerchant.listIsDirty = { ['full'] = false, ['guild'] = false, ['listing'] = false }
MasterMerchant.scrollList = nil
MasterMerchant.guildScrollList = nil
MasterMerchant.listingsScrollList = nil
MasterMerchant.calcInput = nil

MasterMerchant.guildSales = nil
MasterMerchant.guildPurchases = nil
MasterMerchant.guildItems = nil
MasterMerchant.guildColor = { }

-- SRIndex is an inverted indexe of the ScanResults table
-- Each key is a word found in one of the sales items' searched
-- fields (buyer, guild, item name) and a table of the SalesData
-- indexes that contain that word.
MasterMerchant.SRIndex = { }
MasterMerchant.PlayerSpecialText = 'hfdkkdfunlajjamdhsiwsuwj'
MasterMerchant.numEvents = { }
MasterMerchant.moreEventsRequested = { }
MasterMerchant.alertQueue = { }
MasterMerchant.addedEvents = { }
MasterMerchant.lastUpdateTime = { }
MasterMerchant.lastUpdateCount = { }
MasterMerchant.lastNonDuplicate = { }

MasterMerchant.curSort = { 'time', 'desc' }
MasterMerchant.curGuildSort = { 'rank', 'asc' }
MasterMerchant.uiFragment = { }
MasterMerchant.guildUiFragment = { }
MasterMerchant.statsFragment = { }
MasterMerchant.activeTip = nil
MasterMerchant.tippingControl = nil
MasterMerchant.isShiftPressed = nil
MasterMerchant.isCtrlPressed = nil

MasterMerchant.originalSetupCallback = nil
MasterMerchant.originalSellingSetupCallback = nil
MasterMerchant.originalRosterStatsCallback = nil
MasterMerchant.originalRosterBuildMasterList = nil

-- Gap values for Shell sort
MasterMerchant.shellGaps = {
    1391376, 463792,
    198768,86961,33936,13776,4592,
    1968,861,336,112,48,21,7,3,1
}

-- Sound table for mapping readable names to sound names
MasterMerchant.alertSounds = {
    [1] = { name = "None", sound = 'No_Sound' },
    [2] = { name = "Add Guild Member", sound = 'GuildRoster_Added' },
    [3] = { name = "Armor Glyph", sound = 'Enchanting_ArmorGlyph_Placed' },
    [4] = { name = "Book Acquired", sound = 'Book_Acquired' },
    [5] = { name = "Book Collection Completed", sound = 'Book_Collection_Completed' },
    [6] = { name = "Boss Killed", sound = 'SkillXP_BossKilled' },
    [7] = { name = "Charge Item", sound = 'InventoryItem_ApplyCharge' },
    [8] = { name = "Completed Event", sound = 'ScriptedEvent_Completion' },
    [9] = { name = "Dark Fissure Closed", sound = 'SkillXP_DarkFissureClosed' },
    [10] = { name = "Emperor Coronated", sound = 'Emperor_Coronated_Ebonheart' },
    [11] = { name = "Gate Closed", sound = 'AvA_Gate_Closed' },
    [12] = { name = "Lockpicking Stress", sound = 'Lockpicking_chamber_stress' },
    [13] = { name = "Mail Attachment", sound = 'Mail_ItemSelected' },
    [14] = { name = "Mail Sent", sound = 'Mail_Sent' },
    [15] = { name = "Money", sound = 'Money_Transact' },
    [16] = { name = "Morph Ability", sound = 'Ability_MorphPurchased' },
    [17] = { name = "Not Enough Gold", sound = 'PlayerAction_NotEnoughMoney' },
    [18] = { name = "Not Junk", sound = 'InventoryItem_NotJunk' },
    [19] = { name = "Not Ready", sound = 'Ability_NotReady' },
    [20] = { name = "Objective Complete", sound = 'Objective_Complete' },
    [21] = { name = "Open System Menu", sound = 'System_Open' },
    [22] = { name = "Quest Abandoned", sound = 'Quest_Abandon' },
    [23] = { name = "Quest Complete", sound = 'Quest_Complete' },
    [24] = { name = "Quickslot Empty", sound = 'Quickslot_Use_Empty' },
    [25] = { name = "Quickslot Open", sound = 'Quickslot_Open' },
    [26] = { name = "Raid Life", sound = 'Raid_Life_Display_Shown' },
    [27] = { name = "Remove Guild Member", sound = 'GuildRoster_Removed' },
    [28] = { name = "Repair Item", sound = 'InventoryItem_Repair' },
    [29] = { name = "Rune Removed", sound = 'Enchanting_PotencyRune_Removed' },
    [30] = { name = "Skill Added", sound = 'SkillLine_Added' },
    [31] = { name = "Skill Leveled", sound = 'SkillLine_Leveled' },
    [32] = { name = "Stat Purchase", sound = 'Stats_Purchase' },
    [33] = { name = "Synergy Ready", sound = 'Ability_Synergy_Ready_Sound' },
}


MasterMerchant.internalRecipeData =
{
[165797]=1147,
[116345]=2614,
[115612]=281,
[139233]=323,
[151746]=344,
[165655]=1147,
[112434]=-15470,
[116398]=2656,
[151765]=344,
[165718]=1147,
[132159]=31,
[117793]=1459,
[139251]=323,
[115521]=292,
[165687]=1147,
[115416]=794,
[118042]=1355,
[28415]=17125,
[117753]=1461,
[126678]=193,
[28487]=17117,
[165713]=1147,
[115457]=292,
[34008]=11581,
[115465]=292,
[153674]=54,
[33864]=11788,
[117748]=1461,
[151717]=344,
[115332]=740,
[115241]=768,
[115158]=755,
[118022]=1355,
[117687]=1461,
[114401]=4543,
[116458]=2651,
[139175]=323,
[117675]=1461,
[115452]=292,
[153672]=55,
[117713]=1461,
[165683]=1147,
[134340]=168,
[165583]=1148,
[115166]=755,
[115382]=796,
[115295]=740,
[126688]=182,
[117956]=1388,
[167339]=42,
[115651]=444,
[117781]=1459,
[117688]=1461,
[120410]=649,
[115488]=292,
[57183]=-138,
[165653]=1147,
[126488]=597,
[118234]=2930,
[28497]=17529,
[114409]=4543,
[33358]=12556,
[28403]=17217,
[28481]=17541,
[134338]=168,
[151672]=345,
[33904]=11798,
[115219]=758,
[33618]=12417,
[115640]=444,
[28385]=17293,
[34030]=11599,
[126397]=523,
[115153]=755,
[139208]=323,
[116411]=2656,
[165612]=1147,
[118236]=2930,
[118094]=1330,
[28501]=17526,
[126382]=639,
[46061]=-6,
[116460]=2651,
[145361]=620,
[165743]=1147,
[117857]=1451,
[139276]=323,
[139195]=323,
[117797]=1459,
[134738]=245,
[33403]=12273,
[165739]=1147,
[115401]=795,
[145373]=620,
[126505]=439,
[33594]=12096,
[115419]=794,
[134307]=170,
[117704]=1461,
[115376]=796,
[114400]=4543,
[116416]=2656,
[167331]=29,
[115380]=796,
[115433]=292,
[126548]=488,
[115468]=292,
[165783]=1147,
[133556]=-3,
[139241]=323,
[151667]=345,
[151757]=344,
[165777]=1147,
[33630]=118554,
[57199]=-138,
[151635]=346,
[34072]=12010,
[115171]=755,
[126363]=669,
[139272]=323,
[117664]=1461,
[114380]=4543,
[57184]=-138,
[130068]=2115,
[117817]=1459,
[117743]=1461,
[115490]=292,
[115661]=444,
[33903]=118314,
[115251]=727,
[165616]=1147,
[114405]=4543,
[57216]=-138,
[57168]=-138,
[141829]=77,
[165789]=1147,
[165697]=1147,
[115282]=740,
[57143]=-137,
[33416]=12266,
[165737]=1147,
[134352]=168,
[165623]=1147,
[115202]=755,
[33678]=12333,
[134347]=168,
[33909]=118310,
[116404]=2656,
[134918]=67,
[28457]=123747,
[165685]=1147,
[117756]=1461,
[115613]=281,
[115701]=442,
[28309]=17611,
[145374]=620,
[126553]=518,
[126690]=196,
[117759]=1461,
[115455]=292,
[115310]=740,
[151700]=344,
[117690]=1461,
[134355]=168,
[165598]=1147,
[126425]=560,
[116470]=2650,
[116428]=2655,
[115179]=785,
[115473]=292,
[139198]=323,
[117841]=1451,
[151684]=345,
[115328]=740,
[28333]=17386,
[151721]=344,
[126428]=560,
[126454]=518,
[33975]=118199,
[134363]=168,
[116358]=2656,
[115493]=292,
[126432]=493,
[151638]=346,
[33726]=12311,
[165621]=1147,
[139313]=322,
[120076]=1,
[126429]=560,
[151742]=344,
[68269]=-44,
[116349]=2656,
[115254]=714,
[165703]=1147,
[139264]=323,
[118178]=1291,
[139305]=322,
[134328]=169,
[165775]=1147,
[33603]=12018,
[167314]=48,
[117758]=1461,
[33563]=12387,
[115236]=755,
[117705]=1461,
[115285]=740,
[115658]=444,
[115574]=283,
[28390]=17555,
[116423]=2655,
[57217]=-138,
[57180]=-138,
[57177]=-138,
[33971]=11592,
[114410]=6900,
[115370]=796,
[28517]=17514,
[115524]=292,
[118005]=1355,
[28449]=17549,
[115248]=759,
[115352]=796,
[165796]=1147,
[115327]=740,
[117853]=1451,
[57082]=-135,
[115195]=754,
[139255]=323,
[57083]=-137,
[130209]=2133,
[115510]=292,
[118342]=1184,
[115449]=292,
[139321]=322,
[151650]=345,
[167316]=48,
[118023]=1355,
[116366]=2656,
[139231]=323,
[115620]=5693,
[115491]=292,
[151749]=344,
[151728]=344,
[116457]=4752,
[151733]=344,
[68234]=-44,
[145342]=620,
[28350]=123823,
[57115]=-137,
[134917]=70,
[115338]=740,
[33578]=12109,
[115182]=754,
[126677]=189,
[115292]=740,
[28518]=17085,
[46058]=-425,
[115213]=786,
[118011]=1355,
[151695]=344,
[126489]=595,
[165762]=1147,
[115479]=292,
[33924]=11785,
[34071]=11976,
[114407]=4543,
[145344]=620,
[145394]=620,
[115214]=757,
[116403]=2656,
[126656]=232,
[118029]=1355,
[115435]=292,
[121314]=1,
[33642]=118548,
[141825]=77,
[165630]=1147,
[117670]=1461,
[139390]=259,
[134367]=168,
[151669]=345,
[117796]=1459,
[126671]=201,
[153673]=51,
[118092]=1330,
[116388]=2656,
[134344]=168,
[126504]=445,
[115320]=740,
[117824]=1459,
[117804]=1459,
[57139]=-137,
[117679]=1461,
[126544]=499,
[28334]=17560,
[117789]=1459,
[33963]=118205,
[165659]=1147,
[115453]=292,
[115398]=795,
[115471]=292,
[167315]=48,
[126151]=951,
[139324]=322,
[132162]=31,
[55922]=-10221,
[151718]=344,
[43097]=2620,
[117723]=1461,
[165744]=1147,
[132160]=31,
[115685]=443,
[115186]=754,
[28468]=17103,
[126349]=652,
[126395]=674,
[117728]=1461,
[114394]=4543,
[115676]=444,
[57113]=-137,
[118099]=1330,
[117673]=1461,
[151738]=344,
[145350]=620,
[112440]=-15480,
[33458]=12118,
[126434]=643,
[165672]=1147,
[139312]=322,
[115443]=292,
[126692]=172,
[115378]=796,
[134346]=168,
[101879]=-4911,
[141837]=60,
[117783]=1459,
[118004]=1355,
[134336]=169,
[115601]=281,
[139298]=323,
[151902]=335,
[126431]=491,
[139217]=323,
[159440]=58,
[115507]=292,
[165784]=1147,
[117726]=1461,
[165664]=1147,
[118357]=1184,
[42790]=109379,
[145360]=620,
[28332]=17380,
[57200]=-138,
[57196]=-138,
[118010]=1355,
[115209]=724,
[126435]=484,
[126456]=499,
[116476]=4738,
[115381]=796,
[116415]=2656,
[57169]=-138,
[115529]=292,
[33891]=12066,
[134306]=170,
[165682]=1147,
[114368]=4612,
[28409]=123789,
[118190]=1291,
[115585]=281,
[126359]=736,
[126452]=487,
[145378]=620,
[112438]=-15476,
[33910]=11794,
[115230]=759,
[118135]=1329,
[115276]=740,
[57171]=-138,
[33612]=118568,
[115664]=444,
[139257]=323,
[33540]=12104,
[115237]=755,
[33520]=118669,
[115516]=292,
[68272]=-44,
[118181]=1291,
[151743]=344,
[145359]=620,
[139171]=323,
[126421]=560,
[116382]=2656,
[134915]=84,
[33947]=11612,
[126672]=210,
[165752]=1147,
[151671]=345,
[145334]=620,
[115614]=281,
[33666]=12343,
[115163]=755,
[115274]=740,
[165668]=1147,
[147592]=59,
[151714]=344,
[33797]=11873,
[139295]=323,
[165688]=1147,
[33528]=12112,
[115221]=759,
[28394]=123811,
[134308]=170,
[126507]=445,
[151653]=345,
[115478]=292,
[132161]=31,
[115440]=292,
[33498]=12165,
[126499]=433,
[126338]=573,
[139266]=323,
[151732]=344,
[28297]=17620,
[68258]=-44,
[115665]=444,
[126446]=466,
[42784]=3118,
[117775]=1459,
[117790]=1459,
[116441]=2654,
[116459]=2651,
[151656]=345,
[115592]=281,
[115527]=292,
[28413]=17560,
[33487]=12174,
[126498]=459,
[165586]=1148,
[118356]=1184,
[68251]=-44,
[57211]=-138,
[151709]=344,
[151690]=344,
[116430]=2655,
[126518]=547,
[165658]=1147,
[115170]=755,
[68247]=-44,
[139182]=323,
[139275]=323,
[114395]=4543,
[68236]=83979,
[112439]=-15478,
[151710]=344,
[115197]=754,
[115314]=740,
[34035]=12006,
[33987]=12028,
[118016]=1355,
[115199]=754,
[57193]=-138,
[134920]=66,
[57125]=-137,
[151768]=344,
[33636]=118558,
[116355]=2656,
[57174]=-138,
[126459]=595,
[115649]=444,
[151748]=344,
[118003]=1355,
[116389]=2656,
[139209]=323,
[57104]=-137,
[153671]=55,
[115689]=443,
[33870]=11783,
[165674]=1147,
[33999]=12018,
[115198]=754,
[115379]=796,
[115222]=759,
[130208]=2135,
[42814]=109349,
[68233]=-44,
[151676]=345,
[114392]=4543,
[116347]=2570,
[126506]=452,
[165673]=1147,
[165757]=1147,
[151719]=344,
[139296]=323,
[57165]=-138,
[147593]=59,
[115434]=292,
[116413]=2656,
[115307]=740,
[134375]=168,
[118020]=1355,
[115511]=292,
[126422]=560,
[34029]=12011,
[115167]=755,
[34033]=11597,
[134370]=168,
[33735]=11876,
[115626]=276,
[151760]=344,
[126524]=500,
[33810]=11864,
[112426]=-15460,
[151657]=345,
[134319]=170,
[125524]=1330,
[115563]=283,
[115232]=766,
[115565]=283,
[151731]=344,
[165601]=1147,
[126394]=674,
[115663]=444,
[118019]=1355,
[126519]=495,
[117734]=1461,
[68235]=83940,
[28320]=17339,
[115429]=292,
[126345]=628,
[139375]=273,
[139252]=323,
[167317]=54,
[57132]=-137,
[114381]=4543,
[165646]=1147,
[115546]=286,
[134317]=170,
[117828]=1459,
[116426]=2655,
[165584]=1148,
[165643]=1147,
[115528]=292,
[115280]=740,
[126551]=509,
[139174]=323,
[134378]=168,
[33898]=11816,
[134372]=168,
[117795]=1459,
[43143]=2573,
[115403]=795,
[151689]=344,
[117960]=1388,
[116372]=2656,
[117856]=1451,
[117755]=1461,
[165678]=1147,
[115438]=292,
[115711]=435,
[115608]=281,
[117782]=1459,
[151647]=345,
[145333]=620,
[165768]=1147,
[126370]=713,
[117668]=1461,
[57205]=-138,
[33557]=12392,
[126669]=209,
[115394]=796,
[145354]=620,
[114329]=4664,
[139323]=322,
[165759]=1147,
[115371]=796,
[117732]=1461,
[167312]=43,
[28444]=123780,
[126409]=524,
[151681]=345,
[125486]=1350,
[165756]=1147,
[139220]=323,
[68254]=-44,
[139263]=323,
[118093]=1330,
[115389]=796,
[117711]=1461,
[115373]=796,
[115369]=796,
[145358]=620,
[114363]=4612,
[139179]=323,
[115408]=795,
[57129]=-137,
[33567]=12118,
[33690]=12323,
[134916]=68,
[126542]=485,
[118108]=1330,
[126365]=693,
[28505]=17523,
[134314]=170,
[28305]=17614,
[126420]=560,
[126655]=230,
[115289]=740,
[117791]=1459,
[28460]=17109,
[116467]=2651,
[28514]=17087,
[117852]=1451,
[57141]=-137,
[117825]=1459,
[120762]=6,
[115501]=292,
[118036]=1355,
[33789]=118402,
[115650]=444,
[117665]=1461,
[165608]=1147,
[115372]=796,
[115681]=443,
[141852]=48,
[165614]=1147,
[126697]=145,
[151670]=345,
[117798]=1459,
[117749]=1461,
[167318]=47,
[139219]=323,
[115402]=795,
[165607]=1147,
[115523]=292,
[115368]=796,
[151753]=344,
[117829]=1459,
[116429]=2655,
[165645]=1147,
[145330]=620,
[139280]=323,
[115647]=444,
[57120]=-137,
[115321]=740,
[57107]=-137,
[130200]=1988,
[159441]=58,
[115594]=281,
[165706]=1147,
[117910]=3395,
[117694]=1461,
[165613]=1147,
[139267]=323,
[117999]=1355,
[114334]=4664,
[33849]=12048,
[115688]=443,
[139216]=323,
[126415]=525,
[28382]=17561,
[57130]=-137,
[115228]=759,
[118196]=1291,
[57112]=-137,
[139319]=322,
[126407]=528,
[139307]=322,
[165648]=1147,
[151741]=344,
[126441]=520,
[115242]=768,
[42793]=2853,
[28453]=17546,
[151699]=344,
[139325]=322,
[68237]=-44,
[125526]=1326,
[139194]=323,
[139311]=322,
[139297]=323,
[28346]=123825,
[151707]=344,
[145376]=620,
[115677]=444,
[115495]=292,
[28508]=17090,
[116453]=2652,
[126536]=493,
[165847]=1110,
[115305]=740,
[114413]=6896,
[159443]=58,
[165640]=1147,
[115160]=755,
[139303]=322,
[115339]=740,
[117674]=1461,
[115653]=444,
[34062]=11555,
[28308]=17348,
[115509]=292,
[118192]=1291,
[165798]=1147,
[114330]=4664,
[116340]=2648,
[115273]=740,
[115284]=740,
[126483]=609,
[115514]=292,
[139200]=323,
[126438]=532,
[57151]=-137,
[87695]=-3,
[134376]=168,
[115644]=444,
[126525]=497,
[46057]=-425,
[115477]=292,
[145379]=620,
[139206]=323,
[126423]=560,
[116399]=2656,
[139230]=323,
[33720]=12316,
[28317]=17605,
[33711]=11896,
[117689]=1461,
[114384]=4543,
[151632]=346,
[115533]=292,
[118334]=1184,
[117717]=1461,
[165734]=1147,
[115152]=755,
[139087]=398,
[42804]=3087,
[117776]=1459,
[33694]=11997,
[130214]=1975,
[167329]=40,
[33921]=12041,
[151694]=344,
[34050]=11565,
[134364]=168,
[33614]=11937,
[126698]=143,
[134324]=169,
[126535]=513,
[115558]=283,
[115646]=444,
[115247]=758,
[117712]=1461,
[126443]=463,
[34032]=12022,
[115642]=444,
[167313]=43,
[115572]=283,
[116401]=2656,
[57207]=-138,
[57164]=-138,
[117844]=1451,
[165665]=1147,
[118035]=1355,
[145390]=620,
[126514]=391,
[115291]=740,
[57084]=-139,
[28425]=123787,
[115188]=754,
[116402]=2656,
[115692]=443,
[114360]=4612,
[57087]=-137,
[28301]=17617,
[115430]=292,
[43089]=2624,
[151712]=344,
[115312]=740,
[126538]=507,
[151723]=344,
[126534]=513,
[116395]=2656,
[116444]=2653,
[134368]=168,
[151724]=344,
[33808]=11865,
[115586]=281,
[118186]=1291,
[115245]=750,
[33511]=12154,
[126556]=289,
[114379]=4543,
[114332]=4665,
[126461]=590,
[117703]=1461,
[167342]=42,
[115579]=281,
[118177]=1291,
[33438]=12111,
[139232]=323,
[115300]=740,
[115587]=281,
[57135]=-137,
[28360]=17279,
[115484]=292,
[165624]=1147,
[115238]=758,
[115318]=740,
[87696]=-3,
[57118]=-137,
[151687]=345,
[118113]=1330,
[165758]=1147,
[114372]=4612,
[116414]=2656,
[125523]=1332,
[114353]=4612,
[117761]=1460,
[151736]=344,
[57150]=-137,
[126451]=462,
[33696]=12336,
[126401]=514,
[151722]=344,
[115683]=443,
[165728]=1147,
[116391]=2656,
[115513]=292,
[126447]=481,
[167327]=40,
[126523]=527,
[33555]=12128,
[33813]=118386,
[139190]=323,
[134345]=168,
[117773]=1459,
[68263]=83913,
[115615]=281,
[145393]=620,
[126392]=611,
[34044]=11570,
[126662]=205,
[114399]=4543,
[116438]=2654,
[165751]=1147,
[165769]=1147,
[165611]=1147,
[116364]=2656,
[33959]=11602,
[46060]=-525,
[116417]=2656,
[115365]=796,
[57156]=-138,
[126427]=560,
[115159]=755,
[33593]=12362,
[126417]=534,
[115460]=292,
[114351]=4612,
[57186]=-138,
[116448]=2652,
[115522]=292,
[115299]=740,
[115281]=740,
[165667]=1147,
[126120]=718,
[115619]=281,
[117883]=3486,
[115530]=292,
[117998]=1355,
[115377]=796,
[126528]=481,
[43094]=109129,
[145387]=620,
[28419]=17122,
[126133]=726,
[114338]=4664,
[121538]=8,
[126527]=481,
[115678]=444,
[116354]=2656,
[57100]=-137,
[126540]=500,
[118116]=1330,
[115503]=292,
[126445]=465,
[115432]=292,
[115500]=292,
[126676]=200,
[165656]=1147,
[145326]=620,
[139259]=323,
[116365]=2656,
[116410]=2656,
[115165]=755,
[139278]=323,
[43158]=2541,
[118195]=1291,
[145548]=469,
[117816]=1459,
[115437]=292,
[117785]=1459,
[115551]=283,
[139245]=323,
[134959]=39,
[126383]=611,
[117810]=1459,
[117766]=1459,
[68274]=-44,
[33886]=11806,
[57127]=-137,
[125531]=1325,
[117736]=1461,
[57124]=-137,
[114412]=4542,
[117741]=1461,
[115187]=754,
[115353]=796,
[126485]=603,
[126675]=202,
[165738]=1147,
[126436]=482,
[115246]=758,
[165722]=1147,
[115384]=796,
[57093]=-137,
[34027]=12052,
[33915]=12046,
[139212]=323,
[165626]=1147,
[57204]=-138,
[145381]=620,
[126682]=209,
[165727]=1147,
[165761]=1147,
[151668]=345,
[145384]=620,
[116452]=2652,
[126480]=617,
[118180]=1291,
[165594]=1148,
[28461]=17540,
[126694]=189,
[68248]=-44,
[115418]=794,
[165778]=1147,
[165746]=1147,
[115249]=718,
[165802]=1147,
[34074]=11545,
[118012]=1355,
[121051]=322,
[28510]=17089,
[118008]=1355,
[116390]=2656,
[117720]=1461,
[114356]=4612,
[57136]=-137,
[151654]=345,
[126035]=547,
[115243]=768,
[115545]=286,
[115250]=720,
[28405]=123797,
[114396]=4543,
[134332]=169,
[115194]=754,
[28370]=17570,
[117725]=1461,
[33738]=12301,
[118136]=1329,
[151729]=344,
[115383]=796,
[139178]=323,
[116424]=2655,
[118345]=1184,
[165686]=1147,
[115296]=740,
[33855]=12043,
[68267]=-44,
[87687]=-3,
[43128]=2570,
[151764]=344,
[68250]=-44,
[117822]=1459,
[68268]=-44,
[151659]=345,
[114404]=4543,
[115695]=443,
[33624]=118564,
[130198]=1989,
[57090]=-137,
[114389]=4543,
[145375]=620,
[151716]=344,
[151771]=344,
[33862]=20507,
[118048]=1355,
[116344]=2614,
[34041]=12001,
[126357]=706,
[145366]=620,
[115392]=796,
[117669]=1461,
[139018]=-1,
[33646]=11911,
[151655]=345,
[68276]=-44,
[151679]=345,
[28427]=17116,
[126484]=609,
[57181]=-138,
[57114]=-137,
[115177]=755,
[116446]=2652,
[68253]=-44,
[126353]=672,
[151634]=346,
[57092]=-137,
[115628]=276,
[118053]=3045,
[115229]=759,
[134329]=169,
[33846]=11803,
[118122]=1329,
[57161]=-138,
[134339]=168,
[151739]=344,
[134351]=168,
[126546]=492,
[165680]=1147,
[118134]=1329,
[71058]=4,
[126693]=175,
[114388]=4543,
[115155]=755,
[116393]=2656,
[115399]=795,
[139309]=322,
[126521]=495,
[118303]=2894,
[126681]=211,
[115459]=292,
[114377]=4543,
[116465]=2651,
[28378]=17564,
[115414]=794,
[126665]=215,
[114371]=4612,
[139228]=323,
[139273]=323,
[117718]=1461,
[126680]=213,
[115519]=292,
[28473]=123745,
[139243]=323,
[116352]=2656,
[117806]=1459,
[165701]=1147,
[117861]=1451,
[165663]=1147,
[33993]=12023,
[165606]=1147,
[28357]=17281,
[145369]=620,
[117719]=1461,
[115279]=740,
[115340]=740,
[57162]=-138,
[118176]=1291,
[68256]=-44,
[139268]=323,
[116360]=2656,
[115358]=796,
[57187]=-138,
[68249]=-44,
[151839]=281,
[57172]=-138,
[115311]=740,
[165723]=1147,
[151775]=344,
[28293]=17623,
[33945]=118215,
[145395]=620,
[117803]=1459,
[118235]=2930,
[115480]=292,
[126510]=393,
[117779]=1459,
[126341]=586,
[57137]=-137,
[57080]=-137,
[117860]=1451,
[33984]=20258,
[134341]=168,
[28429]=123785,
[115597]=281,
[115172]=755,
[139287]=323,
[153670]=53,
[114386]=4543,
[117813]=1459,
[115374]=796,
[115588]=281,
[115596]=281,
[115178]=785,
[139304]=322,
[165628]=1147,
[125525]=1328,
[115552]=283,
[117849]=1451,
[57105]=-137,
[115334]=740,
[126516]=449,
[139260]=323,
[68240]=-44,
[115525]=292,
[125533]=1325,
[43154]=109075,
[115544]=286,
[139250]=323,
[115655]=444,
[165693]=1147,
[114408]=4543,
[117807]=1459,
[64221]=2,
[28402]=123824,
[114361]=4612,
[115288]=740,
[165650]=1147,
[117771]=1459,
[117769]=1459,
[57182]=-138,
[139016]=-4,
[165681]=1147,
[115302]=740,
[28439]=17109,
[118046]=1355,
[33600]=118582,
[34023]=11998,
[118091]=1330,
[145380]=620,
[33537]=12106,
[116]=4765,
[126457]=595,
[28456]=17112,
[139274]=323,
[117680]=1461,
[139269]=323,
[139213]=323,
[116412]=2656,
[114339]=4664,
[126389]=615,
[126385]=613,
[28417]=123789,
[126414]=517,
[117685]=1461,
[151664]=345,
[165705]=1147,
[139193]=323,
[165634]=1147,
[33516]=12150,
[115323]=740,
[115354]=796,
[126493]=586,
[115600]=281,
[151755]=344,
[139086]=398,
[139192]=323,
[115671]=444,
[116431]=2655,
[115442]=292,
[115486]=292,
[165684]=1147,
[151627]=346,
[117721]=1461,
[151770]=344,
[118025]=1355,
[145349]=620,
[165791]=1147,
[33729]=11881,
[118238]=2930,
[145345]=620,
[57173]=-138,
[28443]=17179,
[33957]=118209,
[115201]=754,
[28433]=123789,
[33804]=11868,
[57099]=-137,
[165748]=1147,
[117799]=1459,
[115205]=801,
[165740]=1147,
[151766]=344,
[43092]=2605,
[33857]=11794,
[115385]=796,
[115234]=769,
[43155]=2563,
[33602]=118626,
[114335]=4664,
[115702]=442,
[165660]=1147,
[165675]=1147,
[115610]=281,
[114385]=4543,
[165622]=1147,
[151685]=345,
[118133]=1329,
[139164]=323,
[33796]=20575,
[115550]=283,
[126679]=215,
[117751]=1461,
[151903]=335,
[115659]=444,
[126482]=609,
[116440]=2654,
[126448]=482,
[118080]=3040,
[33459]=12118,
[57206]=-138,
[28330]=17563,
[126541]=503,
[114411]=4542,
[134310]=170,
[165632]=1147,
[117739]=1461,
[33606]=118572,
[57134]=-137,
[116341]=2648,
[115388]=796,
[57110]=-137,
[126147]=954,
[126532]=517,
[33867]=12037,
[117845]=1451,
[117677]=1461,
[115168]=755,
[118013]=1355,
[57098]=-137,
[147598]=59,
[57152]=-137,
[115173]=755,
[33505]=12159,
[33672]=118514,
[145338]=620,
[115375]=796,
[115174]=755,
[117794]=1459,
[126340]=586,
[33739]=12342,
[115393]=796,
[117991]=3100,
[151702]=344,
[57146]=-137,
[115637]=444,
[115573]=283,
[68259]=-44,
[117745]=1461,
[118021]=1355,
[165766]=1147,
[145328]=620,
[145386]=620,
[33717]=11891,
[165787]=1147,
[115466]=292,
[28431]=17113,
[115215]=757,
[46062]=-431,
[165671]=1147,
[71056]=4,
[165749]=1147,
[126339]=577,
[116369]=2656,
[151633]=346,
[126367]=707,
[114352]=4612,
[115694]=443,
[115216]=757,
[116363]=2656,
[139168]=323,
[139308]=322,
[115607]=281,
[145363]=620,
[145368]=620,
[165790]=1147,
[126674]=200,
[117784]=1459,
[116419]=2656,
[165846]=1110,
[117686]=1461,
[126355]=679,
[115485]=292,
[165711]=1147,
[145372]=620,
[117692]=1461,
[115576]=283,
[115561]=283,
[126424]=560,
[126449]=487,
[28304]=17351,
[33596]=20647,
[117942]=1388,
[126530]=477,
[151673]=345,
[151644]=345,
[151630]=346,
[126472]=628,
[115192]=754,
[134371]=168,
[34065]=11981,
[126509]=393,
[141826]=77,
[165629]=1147,
[151662]=345,
[115557]=283,
[134377]=168,
[151744]=344,
[151734]=344,
[151737]=344,
[33434]=12111,
[117746]=1461,
[33663]=11916,
[33684]=118508,
[126557]=290,
[145371]=620,
[126503]=444,
[116396]=2656,
[117684]=1461,
[33982]=11643,
[115445]=292,
[141828]=77,
[126372]=590,
[115313]=740,
[33587]=118622,
[139258]=323,
[117787]=1459,
[115397]=795,
[165585]=1148,
[115625]=276,
[165625]=1147,
[139291]=323,
[115189]=754,
[28492]=17102,
[115316]=740,
[126433]=642,
[126539]=489,
[28477]=17528,
[28311]=17346,
[116375]=2656,
[139286]=323,
[115458]=292,
[126684]=215,
[115309]=740,
[116449]=2652,
[117708]=1461,
[115447]=292,
[165695]=1147,
[115532]=292,
[133554]=-3,
[114367]=4612,
[57153]=-137,
[126520]=495,
[115386]=796,
[115387]=796,
[116385]=2656,
[166009]=949,
[33420]=20821,
[33632]=11922,
[33573]=12113,
[115534]=292,
[115233]=769,
[115283]=740,
[139277]=323,
[117738]=1461,
[116408]=2656,
[118049]=1355,
[33693]=11891,
[115669]=444,
[118188]=1291,
[125527]=1324,
[112435]=-15472,
[117767]=1459,
[57131]=-137,
[126554]=518,
[33669]=11911,
[33687]=11896,
[139215]=323,
[118031]=1355,
[145409]=607,
[151698]=344,
[115294]=740,
[28348]=17288,
[165714]=1147,
[33508]=12420,
[28373]=17302,
[151730]=344,
[33652]=118580,
[71059]=4,
[116378]=2656,
[165689]=1147,
[115570]=283,
[114373]=4612,
[117786]=1459,
[165600]=1147,
[28513]=123707,
[115411]=795,
[139279]=323,
[139166]=323,
[126373]=590,
[165774]=1147,
[134359]=168,
[33581]=118632,
[115409]=795,
[68275]=-44,
[116409]=2656,
[126664]=223,
[33831]=12106,
[116478]=2645,
[115693]=443,
[115604]=281,
[165715]=1147,
[116370]=2656,
[33405]=12272,
[115605]=281,
[33681]=11901,
[116455]=2652,
[115326]=740,
[134321]=170,
[126486]=603,
[151750]=344,
[167320]=46,
[115639]=444,
[151745]=344,
[117747]=1461,
[117681]=1461,
[151774]=344,
[115180]=754,
[57176]=-138,
[33523]=12144,
[57117]=-137,
[116397]=2656,
[145339]=620,
[115641]=444,
[116462]=2651,
[139229]=323,
[151628]=346,
[114402]=4543,
[57191]=-138,
[114426]=4490,
[114370]=4612,
[115278]=740,
[33885]=12071,
[34017]=118153,
[115417]=794,
[68243]=-44,
[126549]=488,
[126668]=211,
[115504]=292,
[117763]=1460,
[139187]=323,
[115277]=740,
[116471]=2650,
[117740]=1461,
[57095]=-137,
[117777]=1459,
[115212]=718,
[117821]=1459,
[117762]=1460,
[126831]=273,
[71057]=4,
[120764]=6,
[139270]=323,
[117809]=1459,
[126512]=508,
[115555]=283,
[117814]=1459,
[165725]=1147,
[134322]=170,
[57192]=-138,
[115559]=283,
[57166]=-138,
[117851]=1451,
[115297]=740,
[116407]=2656,
[126352]=661,
[57163]=-138,
[118001]=1355,
[117943]=1388,
[117802]=1459,
[33436]=12111,
[130066]=2118,
[165765]=1147,
[115181]=754,
[117996]=1355,
[46063]=-7,
[134331]=169,
[126346]=628,
[118018]=1355,
[28469]=17534,
[115406]=795,
[117699]=1461,
[33819]=118382,
[43142]=109091,
[115359]=796,
[34014]=11576,
[34020]=11571,
[145357]=620,
[153703]=22,
[115590]=281,
[118032]=1355,
[153627]=-1,
[57179]=-138,
[126374]=690,
[165699]=1147,
[134350]=168,
[151701]=344,
[115618]=281,
[139170]=323,
[115231]=766,
[167336]=42,
[118039]=1355,
[117682]=1461,
[118090]=1330,
[114417]=4540,
[117693]=1461,
[145324]=620,
[151772]=344,
[126358]=736,
[57111]=-137,
[118041]=1355,
[118051]=1355,
[126387]=609,
[114357]=4612,
[165633]=1147,
[167321]=51,
[165603]=1147,
[118067]=1341,
[134349]=168,
[33569]=12382,
[117744]=1461,
[117710]=1461,
[28374]=17567,
[139176]=323,
[115304]=740,
[115515]=292,
[115325]=740,
[115531]=292,
[118185]=1291,
[116447]=2652,
[118306]=2893,
[116456]=2652,
[117722]=1461,
[114415]=4540,
[115363]=796,
[117937]=1388,
[115286]=740,
[87691]=-2,
[118197]=1291,
[43088]=109139,
[114398]=4543,
[126344]=623,
[28512]=17088,
[139244]=323,
[28397]=17284,
[28331]=17365,
[115461]=292,
[118355]=1184,
[68266]=-44,
[115464]=292,
[68265]=-44,
[117733]=1461,
[126404]=562,
[139227]=323,
[126453]=518,
[68239]=83956,
[165636]=1147,
[145370]=620,
[115582]=281,
[120436]=331,
[117730]=1461,
[126471]=627,
[115451]=292,
[115027]=2,
[139203]=323,
[115462]=292,
[57155]=-138,
[139199]=323,
[115704]=441,
[115329]=740,
[139247]=323,
[139289]=323,
[33409]=12270,
[116436]=2654,
[165679]=1147,
[126124]=713,
[115526]=292,
[126378]=640,
[118115]=1330,
[115362]=796,
[126558]=288,
[115454]=292,
[145343]=620,
[117724]=1461,
[115690]=443,
[115390]=796,
[115226]=759,
[117714]=1461,
[34053]=11991,
[133555]=-3,
[167322]=51,
[125535]=1322,
[68246]=-44,
[151674]=345,
[115203]=753,
[34068]=11550,
[57213]=-138,
[116381]=2656,
[33996]=11591,
[116427]=2655,
[28299]=17355,
[114336]=4664,
[28496]=17099,
[33892]=11802,
[115672]=444,
[126673]=202,
[118033]=1355,
[165755]=1147,
[115520]=292,
[115290]=740,
[115405]=795,
[115475]=292,
[57195]=-138,
[116392]=2656,
[126399]=524,
[33526]=118633,
[165764]=1147,
[126134]=762,
[139169]=323,
[145353]=620,
[165657]=1147,
[134353]=168,
[139180]=323,
[57145]=-137,
[68260]=83956,
[117812]=1459,
[126400]=524,
[57140]=-137,
[114422]=6886,
[115696]=443,
[165795]=1147,
[130337]=1859,
[118097]=1330,
[117697]=1461,
[139262]=323,
[116373]=2656,
[139224]=323,
[33965]=11597,
[115483]=292,
[115184]=754,
[115609]=281,
[114424]=6941,
[134309]=170,
[57159]=-138,
[28316]=17342,
[114337]=4664,
[28423]=17119,
[165735]=1147,
[139201]=323,
[126495]=453,
[117858]=1451,
[165580]=1148,
[117707]=1461,
[126362]=669,
[115627]=276,
[145362]=620,
[126416]=534,
[115686]=443,
[126661]=208,
[151636]=346,
[114393]=4543,
[115556]=283,
[115580]=281,
[139223]=323,
[126403]=565,
[87690]=-2,
[33454]=12119,
[126386]=613,
[118047]=1355,
[116339]=2648,
[115225]=759,
[159446]=58,
[115656]=444,
[28325]=17565,
[57209]=-138,
[117698]=1461,
[115361]=796,
[139248]=323,
[165661]=1147,
[118359]=1184,
[118358]=1184,
[115436]=292,
[165704]=1147,
[115562]=283,
[145341]=620,
[33490]=118695,
[33852]=11798,
[57081]=-137,
[28398]=123809,
[115679]=5524,
[126347]=645,
[126490]=591,
[57167]=-138,
[126348]=645,
[28362]=17576,
[118340]=1184,
[126388]=609,
[126381]=619,
[42799]=2848,
[115303]=740,
[28353]=17284,
[126529]=477,
[165639]=1147,
[115287]=740,
[126351]=660,
[117691]=1461,
[115441]=292,
[68238]=-44,
[28509]=17520,
[57210]=-138,
[153629]=-1,
[116499]=4807,
[57122]=-137,
[115554]=283,
[145389]=620,
[139314]=322,
[114387]=4543,
[68244]=-44,
[33979]=11586,
[28342]=123825,
[126361]=669,
[115502]=292,
[115463]=292,
[145332]=620,
[33843]=12049,
[115691]=443,
[115667]=444,
[126123]=716,
[126036]=547,
[114364]=4612,
[126552]=509,
[139316]=322,
[112433]=-15468,
[139254]=323,
[165649]=1147,
[126402]=515,
[115298]=740,
[118006]=1355,
[126455]=491,
[115185]=754,
[33795]=12137,
[126494]=584,
[139204]=323,
[57203]=-138,
[87699]=-1,
[126522]=540,
[139185]=323,
[57157]=-138,
[118114]=1330,
[139202]=323,
[112425]=-15458,
[145364]=620,
[115151]=755,
[126396]=674,
[126531]=481,
[126492]=588,
[126491]=591,
[33638]=11917,
[117666]=1461,
[33977]=11587,
[28354]=123827,
[117820]=1459,
[126366]=693,
[126360]=743,
[28465]=123745,
[114333]=4663,
[57189]=-138,
[126391]=611,
[134333]=169,
[145327]=620,
[126412]=502,
[151769]=344,
[145335]=620,
[116443]=2653,
[115208]=723,
[118233]=2930,
[165582]=1148,
[126390]=615,
[130076]=2109,
[117859]=1451,
[151686]=345,
[126685]=165,
[126398]=523,
[114406]=4543,
[130203]=2141,
[165707]=1147,
[118030]=1355,
[165767]=1147,
[117757]=1461,
[167319]=38,
[115422]=794,
[115183]=754,
[116466]=2651,
[117716]=1461,
[42786]=2859,
[118050]=1355,
[115606]=281,
[118017]=1355,
[33802]=11869,
[117683]=1461,
[117963]=1387,
[165698]=1147,
[33916]=11790,
[117667]=1461,
[126663]=227,
[33675]=11906,
[139189]=323,
[126547]=495,
[33480]=12180,
[134312]=170,
[134313]=170,
[126543]=496,
[115275]=740,
[151727]=344,
[134327]=169,
[115239]=762,
[28437]=17542,
[115204]=755,
[151678]=345,
[115351]=796,
[57119]=-137,
[33644]=11912,
[116386]=2656,
[116350]=2656,
[115223]=759,
[139317]=322,
[33919]=11788,
[118034]=1355,
[165771]=1147,
[28504]=17093,
[116437]=2654,
[33953]=11607,
[33650]=11974,
[28281]=123898,
[117950]=1388,
[145392]=620,
[130077]=2109,
[117846]=1451,
[57202]=-138,
[134564]=18,
[28489]=17535,
[139292]=323,
[115175]=790,
[134356]=168,
[165642]=1147,
[134343]=168,
[115652]=444,
[116383]=2656,
[117672]=1461,
[165760]=1147,
[153657]=78,
[126657]=232,
[165747]=1147,
[134361]=168,
[134362]=168,
[33648]=12358,
[126658]=204,
[126458]=597,
[115568]=283,
[116368]=2656,
[134366]=168,
[114397]=4543,
[165800]=1147,
[126526]=497,
[33697]=11930,
[126408]=526,
[114358]=4612,
[115602]=281,
[42808]=2834,
[115272]=740,
[167340]=42,
[116357]=2656,
[115543]=286,
[116380]=2656,
[126696]=148,
[118102]=1330,
[117780]=1459,
[117678]=1461,
[126460]=593,
[117940]=1388,
[33928]=11782,
[114416]=4540,
[57138]=-137,
[145352]=620,
[116435]=2654,
[57158]=-138,
[139165]=323,
[118007]=1355,
[126487]=589,
[115684]=443,
[118045]=1355,
[57201]=-138,
[115317]=740,
[115699]=442,
[139172]=323,
[115616]=281,
[117929]=1388,
[117752]=1461,
[145351]=620,
[33440]=12183,
[126670]=203,
[115583]=281,
[43124]=109107,
[115253]=747,
[114355]=4612,
[33552]=118651,
[115333]=740,
[139181]=323,
[33723]=11886,
[117788]=1459,
[125510]=1351,
[115156]=755,
[118014]=1355,
[57170]=-138,
[114374]=4612,
[115470]=292,
[115575]=283,
[134919]=63,
[57148]=-137,
[165690]=1147,
[115508]=292,
[115448]=292,
[117819]=1459,
[117839]=1451,
[68257]=83939,
[153652]=78,
[151631]=346,
[165733]=1147,
[165806]=1147,
[165647]=1147,
[118015]=1355,
[126667]=217,
[115407]=795,
[139197]=323,
[165780]=1147,
[165772]=1147,
[118193]=1291,
[57108]=-137,
[126405]=570,
[126691]=174,
[165651]=1147,
[117847]=1451,
[126375]=691,
[126508]=445,
[165702]=1147,
[42807]=3088,
[114376]=4543,
[115603]=281,
[33698]=118536,
[165741]=1147,
[165792]=1147,
[117997]=1355,
[139225]=323,
[115496]=292,
[139207]=323,
[116425]=2655,
[139184]=323,
[167326]=50,
[139210]=323,
[115482]=292,
[117811]=1459,
[28493]=17532,
[151641]=346,
[139226]=323,
[118009]=1355,
[145325]=620,
[165590]=1148,
[54377]=-8677,
[115643]=444,
[116379]=2656,
[139283]=323,
[126343]=611,
[139256]=323,
[57147]=-137,
[139253]=323,
[134357]=168,
[115469]=292,
[33714]=12269,
[139218]=323,
[87685]=-3,
[33560]=12124,
[117696]=1461,
[165588]=1148,
[134342]=168,
[139310]=322,
[115476]=292,
[145383]=620,
[139288]=323,
[165801]=1147,
[115662]=444,
[118189]=1291,
[57178]=-138,
[116361]=2656,
[34056]=11560,
[165717]=1147,
[118343]=1184,
[165691]=1147,
[126369]=721,
[115444]=292,
[117801]=1459,
[126371]=716,
[115364]=796,
[117727]=1461,
[141839]=60,
[33741]=11871,
[139235]=323,
[165589]=1148,
[115687]=443,
[33861]=12042,
[139242]=323,
[134369]=168,
[165700]=1147,
[139246]=323,
[116359]=2656,
[139249]=323,
[57096]=-137,
[116377]=2656,
[33514]=118679,
[118305]=2895,
[165587]=1148,
[117695]=1461,
[115164]=755,
[151747]=344,
[28472]=17100,
[139271]=323,
[117770]=1459,
[167323]=51,
[114350]=4612,
[33889]=11804,
[165620]=1147,
[115654]=444,
[126545]=481,
[114359]=4612,
[118341]=1184,
[139320]=322,
[145355]=620,
[118086]=1330,
[139322]=322,
[115517]=292,
[126497]=446,
[33493]=12169,
[115680]=443,
[145356]=620,
[116434]=2654,
[116387]=2656,
[141822]=79,
[57175]=-138,
[115391]=796,
[115697]=443,
[115446]=292,
[141830]=77,
[145323]=592,
[118083]=1330,
[126440]=519,
[57103]=-137,
[114365]=4612,
[153654]=78,
[145337]=620,
[165696]=1147,
[117818]=1459,
[145347]=620,
[115200]=754,
[115591]=281,
[159444]=58,
[139091]=395,
[159445]=58,
[115240]=768,
[141838]=60,
[118052]=1355,
[116464]=2651,
[139282]=323,
[151642]=346,
[165619]=1147,
[115536]=292,
[145388]=620,
[165677]=1147,
[165710]=1147,
[151711]=344,
[28289]=17626,
[33456]=12119,
[139191]=323,
[115472]=292,
[165719]=1147,
[153651]=78,
[115315]=740,
[68270]=-44,
[165720]=1147,
[117764]=1460,
[114383]=4543,
[126406]=570,
[115161]=755,
[42796]=3112,
[115410]=795,
[115481]=292,
[57109]=-137,
[145385]=620,
[141827]=77,
[165604]=1147,
[165805]=1147,
[116450]=2652,
[126666]=215,
[57121]=-137,
[33839]=11809,
[116384]=2656,
[33411]=12269,
[147595]=59,
[125528]=1321,
[57185]=-138,
[165736]=1147,
[126533]=513,
[118553]=1039,
[151680]=345,
[115498]=292,
[57142]=-137,
[118027]=1355,
[130320]=1847,
[68264]=-44,
[151645]=345,
[151648]=345,
[114369]=4612,
[126537]=504,
[68261]=-44,
[151658]=345,
[118199]=1291,
[165602]=1147,
[151663]=345,
[57160]=-138,
[28313]=17608,
[115657]=444,
[151665]=345,
[134360]=168,
[126450]=488,
[28358]=123819,
[115356]=796,
[117715]=1461,
[116454]=2652,
[151691]=344,
[115535]=292,
[33897]=118324,
[34002]=11586,
[118194]=1291,
[28476]=17098,
[114354]=4612,
[118044]=1355,
[68273]=-44,
[28366]=17573,
[115439]=292,
[116451]=2652,
[151692]=344,
[151693]=344,
[68242]=-44,
[151629]=346,
[115560]=283,
[114327]=4664,
[151696]=344,
[145340]=620,
[151706]=344,
[126418]=560,
[151708]=344,
[115293]=740,
[145382]=620,
[151715]=344,
[165807]=1147,
[167335]=42,
[34005]=118159,
[117911]=3393,
[151720]=344,
[151651]=345,
[117731]=1461,
[151705]=344,
[117855]=1451,
[134316]=170,
[115157]=755,
[165724]=1147,
[34059]=11986,
[115224]=759,
[151735]=344,
[151740]=344,
[151626]=346,
[165808]=1147,
[126380]=611,
[115668]=444,
[139196]=323,
[33626]=11927,
[57106]=-137,
[151752]=344,
[151754]=344,
[42759]=2909,
[151756]=344,
[167324]=34,
[151758]=344,
[117800]=1459,
[116432]=2655,
[151773]=344,
[134318]=170,
[165637]=1147,
[139173]=323,
[134311]=170,
[120763]=6,
[147594]=59,
[33585]=12103,
[165709]=1147,
[145367]=620,
[33981]=12033,
[57126]=-137,
[145331]=620,
[139240]=323,
[118348]=1184,
[116367]=2656,
[130326]=1847,
[126411]=498,
[165745]=1147,
[115584]=281,
[165794]=1147,
[153655]=78,
[139281]=323,
[57116]=-137,
[151637]=346,
[159442]=58,
[165654]=1147,
[33702]=12331,
[57089]=-137,
[117848]=1451,
[117754]=1461,
[121050]=324,
[115638]=444,
[165803]=1147,
[126550]=507,
[139236]=323,
[118349]=1184,
[33933]=118228,
[114375]=4543,
[33732]=12306,
[125530]=1333,
[126379]=640,
[165579]=1148,
[165581]=1148,
[134315]=170,
[165599]=1147,
[33575]=118636,
[126689]=171,
[115456]=292,
[126377]=640,
[116342]=2648,
[139261]=323,
[165591]=1148,
[33895]=11800,
[134320]=170,
[165592]=1148,
[165593]=1148,
[151725]=344,
[165595]=1148,
[165596]=1148,
[114382]=4543,
[28411]=17128,
[57190]=-138,
[165610]=1147,
[165615]=1147,
[115474]=292,
[141831]=65,
[118191]=1291,
[117854]=1451,
[117850]=1451,
[114391]=4543,
[118024]=1355,
[132163]=31,
[116356]=2656,
[145336]=620,
[151759]=344,
[117774]=1459,
[167304]=57,
[115357]=796,
[151639]=346,
[117735]=1461,
[57091]=-137,
[165641]=1147,
[117926]=1388,
[115154]=755,
[28421]=123787,
[165763]=1147,
[118187]=1291,
[165644]=1147,
[165716]=1147,
[115700]=442,
[118002]=1355,
[126364]=692,
[151640]=346,
[115396]=795,
[115467]=292,
[151761]=344,
[115244]=732,
[126419]=560,
[139222]=323,
[87686]=-3,
[165662]=1147,
[139234]=323,
[117706]=1461,
[134348]=168,
[165788]=1147,
[115666]=444,
[116353]=2656,
[118109]=1330,
[165666]=1147,
[165669]=1147,
[165670]=1147,
[117742]=1461,
[165676]=1147,
[117737]=1461,
[126515]=386,
[165694]=1147,
[153656]=78,
[115581]=281,
[33873]=12036,
[139293]=323,
[115367]=796,
[115499]=292,
[114331]=4664,
[165692]=1147,
[151649]=345,
[33868]=11923,
[117900]=3645,
[117808]=1459,
[167311]=43,
[117842]=1451,
[117750]=1461,
[116422]=2655,
[28441]=17555,
[57123]=-137,
[165708]=1147,
[151683]=345,
[33531]=12110,
[151763]=344,
[139285]=323,
[33708]=12326,
[114378]=4543,
[145365]=620,
[165712]=1147,
[115211]=751,
[145377]=620,
[126683]=215,
[33913]=11792,
[165721]=1147,
[87697]=-3,
[165726]=1147,
[117772]=1459,
[118026]=1355,
[117792]=1459,
[68262]=-44,
[126687]=161,
[165750]=1147,
[115355]=796,
[126437]=532,
[28435]=17111,
[115191]=754,
[166450]=509,
[165754]=1147,
[116371]=2656,
[115220]=759,
[28482]=123748,
[115431]=292,
[118336]=1184,
[165786]=1147,
[115512]=292,
[33951]=12040,
[139188]=323,
[165731]=1147,
[134334]=169,
[165770]=1147,
[165773]=1147,
[165779]=1147,
[165781]=1147,
[126502]=443,
[126368]=718,
[57208]=-138,
[165785]=1147,
[115673]=444,
[165793]=1147,
[126125]=710,
[139315]=322,
[115227]=759,
[33660]=12348,
[153653]=78,
[118063]=3041,
[139214]=323,
[115335]=740,
[165804]=1147,
[116461]=2651,
[115413]=794,
[57085]=-137,
[57144]=-137,
[126342]=595,
[126513]=387,
[33699]=11927,
[165617]=1147,
[126439]=521,
[33931]=11780,
[117729]=1461,
[115598]=281,
[114366]=4612,
[115595]=281,
[167333]=37,
[165627]=1147,
[115593]=281,
[151697]=344,
[167337]=42,
[126511]=393,
[151767]=344,
[117827]=1459,
[114349]=4612,
[145348]=620,
[151652]=345,
[126135]=762,
[33502]=12425,
[115169]=755,
[151660]=345,
[57086]=-137,
[115337]=740,
[116516]=4791,
[147597]=59,
[114390]=4543,
[134365]=168,
[68245]=-44,
[28386]=17558,
[57212]=-138,
[134325]=169,
[126695]=200,
[117954]=1388,
[115308]=740,
[117840]=1451,
[57215]=-138,
[57188]=-138,
[153625]=-1,
[139294]=323,
[46059]=-425,
[118037]=1355,
[126430]=560,
[139300]=323,
[115589]=281,
[126501]=440,
[115193]=754,
[151661]=345,
[68255]=-44,
[165618]=1147,
[118110]=1330,
[33969]=118203,
[115553]=283,
[57094]=-137,
[57133]=-137,
[115218]=757,
[28401]=123799,
[165732]=1147,
[165605]=1147,
[147596]=59,
[151682]=345,
[33939]=118223,
[115404]=795,
[126376]=691,
[115489]=292,
[139177]=323,
[116351]=2656,
[116400]=2656,
[116463]=2651,
[117676]=1461,
[34026]=11566,
[34011]=12008,
[126350]=660,
[115564]=283,
[28485]=17538,
[151704]=344,
[117709]=1461,
[115675]=444,
[167338]=42,
[33654]=12353,
[116513]=4853,
[34047]=11996,
[57102]=-137,
[57101]=-137,
[115301]=740,
[115631]=5740,
[28445]=17552,
[33496]=12430,
[126426]=560,
[118088]=1330,
[115566]=283,
[116406]=2656,
[139183]=323,
[115366]=796,
[139301]=323,
[139211]=323,
[126517]=447,
[115497]=292,
[115217]=757,
[139284]=323,
[33620]=11932,
[167341]=42,
[116418]=2656,
[57194]=-138,
[126354]=679,
[117815]=1459,
[57197]=-138,
[167325]=50,
[116394]=2656,
[165631]=1147,
[118040]=1355,
[33927]=12036,
[115518]=292,
[165638]=1147,
[115210]=751,
[165776]=1147,
[118179]=1291,
[126555]=518,
[117826]=1459,
[33478]=118709,
[114403]=4543,
[115674]=444,
[145329]=620,
[57128]=-137,
[33856]=20514,
[151713]=344,
[151677]=345,
[134358]=168,
[68252]=-44,
[126473]=623,
[126384]=611,
[115256]=737,
[115252]=742,
[115571]=283,
[57088]=-137,
[115648]=444,
[28516]=17086,
[33591]=12098,
[116346]=2614,
[57214]=-138,
[115322]=740,
[134354]=168,
[116477]=2645,
[117823]=1459,
[116374]=2656,
[115235]=755,
[115487]=292,
[116468]=2651,
[151666]=345,
[42811]=3085,
[115176]=790,
[139290]=323,
[165729]=1147,
[167330]=29,
[115682]=443,
[126444]=464,
[165753]=1147,
[117663]=1461,
[115331]=740,
[57149]=-137,
[115450]=292,
[151703]=344,
[68241]=-44,
[126500]=442,
[115196]=754,
[151675]=345,
[126442]=514,
[132164]=31,
[28321]=123836,
[115645]=444,
[68271]=-44,
[115330]=740,
[115567]=283,
[134335]=169,
[114362]=4612,
[126474]=625,
[28452]=17115,
[139186]=323,
[33900]=11815,
[33825]=118372,
[165730]=1147,
[115415]=794,
[130334]=1845,
[117702]=1461,
[117805]=1459,
[28483]=17145,
[117671]=1461,
[118183]=3189,
[33879]=12031,
[114340]=4664,
[165799]=1147,
[118198]=1291,
[115617]=281,
[126496]=481,
[116376]=2656,
[151762]=344,
[33484]=118699,
[115262]=6049,
[117701]=1461,
[165609]=1147,
[126413]=516,
[32160]=120065,
[115319]=740,
[151751]=344,
[115190]=754,
[118200]=1291,
[115162]=755,
[145346]=620,
[139205]=323,
[115324]=740,
[139299]=323,
[165742]=1147,
[116405]=2656,
[117700]=1461,
[139318]=322,
[115400]=795,
[145391]=620,
[115492]=292,
[28338]=123827,
[116362]=2656,
[57198]=-138,
[126126]=708,
[139221]=323,
[139265]=323,
[116439]=2654,
[33906]=11797,
[115306]=740,
[116421]=2655,
[115660]=444,
[115569]=283,
[114328]=4664,
[118095]=1330,
[165635]=1147,
[139306]=322,
[33801]=12132,
[33837]=118321,
[151726]=344,
[115599]=281,
[115360]=796,
[115670]=444,
[115255]=714,
[118038]=1355,
[126356]=679,
[28500]=17096,
[115611]=281,
[118028]=1355,
[167328]=40,
[165652]=1147,
[126699]=141,
[151646]=345,
[33922]=11786,
[126410]=497,
[165782]=1147,
[28464]=17106,
[139167]=323,
[116442]=4765,
}

local function getItemLinkFromItemId(itemId) 
    return string.format("|H1:item:%d:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0|h|h", itemId) 
end


local function indexRecipes(t, index)
    local itemId = GetItemLinkItemId(index)
    local offset = MasterMerchant.internalRecipeData[itemId]
    if offset == nil then
      return nil
    end
    local recipeId = itemId + offset

    if recipeId then
        -- Item is in the list!
        return getItemLinkFromItemId(recipeId)
    end
    return nil
end

local recipeMetatable = 
{
    ["__index"] = indexRecipes,
}
MasterMerchant.recipeData = {}
setmetatable(MasterMerchant.recipeData, recipeMetatable)

local effectIds =
{ -- 1 == positive potency 2 == negative potency
    [43573] =  { 45831 , 2 },
    [26580] =  { 45831 , 1 },
    [45868] =  { 45832 , 2 },
    [26582] =  { 45832 , 1 },
    [45867] =  { 45833 , 2 },
    [26588] =  { 45833 , 1 },
    [26581] =  { 45834 , 1 },
    [45869] =  { 45834 , 2 },
    [26583] =  { 45835 , 1 },
    [45870] =  { 45835 , 2 },
    [26589] =  { 45836 , 1 },
    [45871] =  { 45836 , 2 },
    [26586] =  { 45837 , 2 },
    [26587] =  { 45837 , 1 },
    [26848] =  { 45838 , 1 },
    [26849] =  { 45838 , 2 },
    [5365] =   { 45839 , 1 },
    [5364] =   { 45839 , 2 },
    [43570] =  { 45840 , 2 },
    [26844] =  { 45840 , 1 },
    [26841] =  { 45841 , 1 },
    [26847] =  { 45841 , 2 },
    [26845] =  { 45842 , 2 },
    [5366] =   { 45842 , 1 },
    [54484] =  { 45843 , 1 },
    [26591] =  { 45843 , 2 },
    [45874] =  { 45846 , 1 },
    [45875] =  { 45846 , 2 },
    [45885] =  { 45847 , 2 },
    [45883] =  { 45847 , 1 },
    [45886] =  { 45848 , 2 },
    [45884] =  { 45848 , 1 },
    [45873] =  { 45849 , 2 },
    [45872] =  { 45849 , 1 },
    [166046] = {166045 , 2 },
    [166047] = {166045 , 1 },
    [68344]  = {68342  , 2 },
    [68343]  = {68342  , 1 },
}
-- 68344

local potencyIds = 
{
    [5] =  {45855 , 45817 },
    [10] = {45856 , 45818 },
    [15] = {45857 , 45819 },
    [20] = {45806 , 45820 },
    [25] = {45807 , 45821 },
    [30] = {45808 , 45822 },
    [35] = {45809 , 45823 },
    [40] = {45810 , 45824 },
    [45] = {45811 , 45825 },
    [51] = {45812 , 45826 },
    [53] = {45813 , 45827 },
    [55] = {45814 , 45828 },
    [57] = {45815 , 45829 },
    [63] = {45816 , 45830 },
    [65] = {64509 , 64508 },
    [66] = {68341 , 68340 },
}

local qualityIds =
{
    [1] = 45850 ,
    [2] = 45851 ,
    [3] = 45852 ,
    [4] = 45853 ,
    [5] = 45854 ,
}

local function splitItem(t, index)
    local itemId, lvl, CPLVL, quality = string.match(index,"(%d+):(%d+):(%d+):(%d+)")
    itemId = tonumber(itemId)
    lvl = tonumber(lvl)
    CPLVL = tonumber(CPLVL)
    quality = tonumber(quality)
    local combinedLvl = lvl + CPLVL
    local essence = effectIds[itemId]
    if not essence then return end
    if not potencyIds[combinedLvl] then return end
    local potency = potencyIds[combinedLvl][essence[2]]
    local quality = qualityIds[quality]
    if not potency or not quality or not essence then return end
    return {
        {["item"] = getItemLinkFromItemId(potency), ["required"] = 1}, 
        {["item"] = getItemLinkFromItemId(essence[1]), ["required"] = 1}, 
        {["item"] = getItemLinkFromItemId(quality), ["required"] = 1}
    }
end

MasterMerchant.virtualRecipe = {}
setmetatable(MasterMerchant.virtualRecipe, {["__index"] = splitItem})